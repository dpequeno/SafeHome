CREATE DATABASE PROJETO;

USE PROJETO;

CREATE TABLE USUARIO(
	IDUSUARIO INT PRIMARY KEY AUTO_INCREMENT,
	PNOME VARCHAR(30) NOT NULL,
	SOBRENOME VARCHAR(30) NOT NULL,
	NASCIMENTO VARCHAR(10) NOT NULL,
	SEXO ENUM('M','F') NOT NULL,
	CPF VARCHAR(12) UNIQUE,
	EMAIL VARCHAR(50) UNIQUE
);


CREATE TABLE RESIDENCIA(
	IDRESIDENCIA INT PRIMARY KEY AUTO_INCREMENT,
	CEP VARCHAR(9),	
	RUA VARCHAR(30) NOT NULL,
	NUMERO INT NOT NULL,
	BAIRRO VARCHAR(30) NOT NULL,
	CIDADE VARCHAR(30) NOT NULL,
	ESTADO VARCHAR(2) NOT NULL,
	ID_USUARIO INT,
	FOREIGN KEY(ID_USUARIO)
	REFERENCES USUARIO(IDUSUARIO)
);

CREATE TABLE IMOBILE(
	IDIMOBILE INT PRIMARY KEY AUTO_INCREMENT,
	NUMUSUARIOS INT,	
	VERSAO VARCHAR(5),
	LICENCA VARCHAR(10),
	ID_USUARIO INT,
	FOREIGN KEY(ID_USUARIO)
	REFERENCES USUARIO (IDUSUARIO)
);





CREATE TABLE TELEFONE_USUARIO(
	IDTELEFONEU INT PRIMARY KEY AUTO_INCREMENT,	
	TIPO ENUM('COM','RES','CEL'),
	USERTELEFONE VARCHAR(10) NOT NULL,
	ID_USUARIO INT,
	FOREIGN KEY (ID_USUARIO)
	REFERENCES USUARIO (IDUSUARIO)
);

CREATE TABLE ISAFE(
IDISAFE INT PRIMARY KEY AUTO_INCREMENT,
	CMARCA VARCHAR(30) NOT NULL,
	CMODELO VARCHAR(30) NOT NULL,
	CNUMERO INT NOT NULL,
	SPMARCA VARCHAR(30) NOT NULL,
	SPMODELO VARCHAR(30) NOT NULL,
	SPNUMERO INT NOT NULL,
LBMARCA VARCHAR(30) NOT NULL,
	LBMODELO VARCHAR(30) NOT NULL,
	LBNUMERO VARCHAR(30) NOT NULL,
AMARCA VARCHAR(30) NOT NULL,
	AMODELO VARCHAR(30) NOT NULL,
	ID_RESIDENCIA INT,
	FOREIGN KEY (ID_RESIDENCIA)
	REFERENCES RESIDENCIA(IDRESIDENCIA)
);

CREATE TABLE CENTRALSEGURANCA(
IDCENTRAL INT PRIMARY KEY AUTO_INCREMENT,
	CEP VARCHAR(9),	
	RUA VARCHAR(30) NOT NULL,
	NUMERO INT NOT NULL,
	BAIRRO VARCHAR(30) NOT NULL,
	CIDADE VARCHAR(30) NOT NULL,
	ESTADO VARCHAR(2) NOT NULL
);

CREATE TABLE TELEFONE_CENTRAL(
IDTELEFONEC INT PRIMARY KEY AUTO_INCREMENT,
	CENTRALTELEFONE VARCHAR(10) NOT NULL,
	ID_CENTRAL INT,
	FOREIGN KEY (ID_CENTRAL)
	REFERENCES CENTRALSEGURANCA (IDCENTRAL)
);
INSERT INTO USUARIO(PNOME,SOBRENOME,NASCIMENTO,SEXO,CPF,EMAIL) VALUES('DANILO','PEQUENO','22-10-1993','M','123456789-01', 'DANILO.PEQUENO@EE.UFCG.EDU.BR');

INSERT INTO RESIDENCIA(CEP,RUA,NUMERO,BAIRRO,CIDADE,ESTADO) VALUES('58475-000','JOSE DANTAS','131','VILA SAO JOSE','QUEIMADAS', 'PB');

INSERT INTO IMOBILE(NUMUSUARIOS,VERSAO,LICENCA) VALUES('10','3.2.1','KEY007');

INSERT INTO TELEFONEUSUARIO(TIPO,USERTELEFONE) VALUES('CEL','991011015');

INSERT INTO ISAFE(CMARCA,CMODELO, CNUMERO, SPMARCA,SPMODELO, SPNUMERO, LBMARCA,LBMODELO, LBNUMERO, AMARCA,AMODELO) VALUES('SAMSUNG','X8692','4', 'SECURITY','AO574','5', 'DIGITAL','B85F','2', 'BUZINA','BIP98');

INSERT INTO CENTRALSEGURANCA(CEP,RUA,NUMERO,BAIRRO,CIDADE,ESTADO) VALUES('48659-00','FLORIANO PEIXOTO','1356','CENTRO','CAMPINA GRANDE', 'PB');

INSERT INTO TELEFONECENTRAL(CENTRALTELEFONE) VALUES('33921580');

/*Retorne a lista de usuários com Nome, Telefone, CPF, Rua, Cidade e Estado*/

SELECT PNOME, SOBRENOME, USERTELEFONE, CPF, RUA, CIDADE, ESTADO FROM USUARIO, TELEFONEUSUARIO, RESIDENCIA;

/*Retorne o número de usuários que moram em Campina Grande*/

SELECT COUNT(*) FROM RESIDENCIA
WHERE CIDADE='CAMPINA GRANDE';

/*Retorne o número de sensores de Presença e de Câmeras cadastrados em um iSafe*/

SELECT SPNUMERO, CNUMERO FROM ISAFE
WHERE IDISAFE='1';

/*Retorne as informações Modelo e Marca do Leitor Biométrico e de um Alarme*/

SELECT IDISAFE, LBMARCA, LBMODELO, AMARCA, AMODELO FROM ISAFE;

/*Retorne a lista de Central de Segurança com o Telefone, ID, e Endereço*/

SELECT CENTRALTELEFONE, IDCENTRAL, RUA, NUMERO, CEP, BAIRRO, CIDADE, ESTADO FROM CENTRALSEGURANCA, TELEFONECENTRAL; 

